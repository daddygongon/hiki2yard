<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: md2yard
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "md2yard";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: md2yard</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="file_list.html"></iframe>

      <div id="content"><div id='filecontents'><h1>概要</h1>

<p>rake yardでdoc/file.*.htmlを作成した時に，うまくcodeがhighlight変換されない．</p>

<h1>経過</h1>

<p>8/3のゼミでerinjinuへ説明しているときに，俺のでは正常に変換されるのに，erijinuのmac上では変換されないことが判明</p>

<h2>rake yardでpreがうまく通らない理由</h2>

<ul>
<li>原因不明</li>
<li>おれが，yardをいじっちゃったのかも．得にcodeの前後にpreをつけたような記憶が．．．</li>
<li>ただそれがどこにあるのか不明．version変わってるので，消えてると思うんやけど．</li>
<li>もう少し探してみます．</li>
</ul>

<h3>対策</h3>

<p>とりあえず，wikiで登録するようにした．なんかしらんけど，直接あげられるし．</p>

<h1>作業メモ</h1>

<p>とりあえず，/usr/local/lib/ruby/gems/2.2.0/gems/yard-0.9.5で穴をほってみたが，お宝は，見当たらず．</p>

<h2>原因コードの場所</h2>

<pre class="code tcsh"><code class="tcsh">lib/yard/templates/helpers/html_helper.rb:        html.gsub(/&lt;pre\s*(?:lang=&quot;(.+?)&quot;)?&gt;(?:\s*&lt;code\s*(?:class=&quot;(.+?)&quot;)?\s*&gt;)?(.+?)(?:&lt;\/code&gt;\s*)?&lt;\/pre&gt;/m) do
lib/yard/templates/helpers/html_helper.rb:          %Q{&lt;pre class=&quot;#{classes}&quot;&gt;&lt;code class=&quot;#{language}&quot;&gt;#{string}&lt;/code&gt;&lt;/pre&gt;}

emacs lib/yard/templates/helpers/html_helper.rb


templates/default/tags/html/example.erb:      &lt;pre class=&quot;example code&quot;&gt;&lt;code&gt;&lt;%= html_syntax_highlight(tag.text) %&gt;&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p>html_helper.rbに記述があるが，ちゃんと動いているようで，erijinuでなぜ動かないかが不明．erijinuでdebugが必要か．．．</p>

<h2>その他</h2>

<pre class="code ruby"><code class="ruby">
bob% grep &quot;&lt;code&quot; */*/*/*.*rb
spec/templates/helpers/html_helper_spec.rb:      expect(html).to match %r{^&lt;p&gt;Introduction:&lt;/p&gt;.*&lt;code class=&quot;ruby&quot;&gt;}m
spec/templates/helpers/html_helper_spec.rb:      expect(subject.htmlify(&#39;&lt;pre&gt;&lt;code&gt;def x; end&lt;/code&gt;&lt;/pre&gt;&#39;, :html)).to eq(
spec/templates/helpers/html_helper_spec.rb:        &#39;&lt;pre class=&quot;code NAME&quot;&gt;&lt;code class=&quot;NAME&quot;&gt;foobar&lt;/code&gt;&lt;/pre&gt;&#39;)
spec/templates/helpers/html_helper_spec.rb:      expect(subject.htmlify(&quot;&lt;pre&gt;&lt;code&gt;!!!LANG\ndef x; end&lt;/code&gt;&lt;/pre&gt;&quot;, :html)).to eq(
spec/templates/helpers/html_helper_spec.rb:        &#39;&lt;pre class=&quot;code LANG&quot;&gt;&lt;code class=&quot;LANG&quot;&gt;foobar&lt;/code&gt;&lt;/pre&gt;&#39;)
spec/templates/helpers/html_helper_spec.rb:      expect(subject.htmlify(&#39;&lt;pre lang=&quot;foo&quot;&gt;&lt;code&gt;{&quot;foo&quot; =&gt; 1}&lt;/code&gt;&lt;/pre&gt;&#39;, :html)).to eq(
spec/templates/helpers/html_helper_spec.rb:        &#39;&lt;pre class=&quot;code foo&quot;&gt;&lt;code class=&quot;foo&quot;&gt;{&amp;quot;foo&amp;quot; =&amp;gt; 1}&lt;/code&gt;&lt;/pre&gt;&#39;)
spec/templates/helpers/html_helper_spec.rb:      expect(subject.htmlify(&#39;&lt;pre lang=&quot;foo&quot;&gt;&lt;code&gt;x = 1&lt;/code&gt;&lt;/pre&gt;&#39;, :html)).to eq(
spec/templates/helpers/html_helper_spec.rb:        &#39;&lt;pre class=&quot;code foo&quot;&gt;&lt;code class=&quot;foo&quot;&gt;x = 1&lt;/code&gt;&lt;/pre&gt;&#39;)
spec/templates/helpers/html_helper_spec.rb:      expect(subject.htmlify(&#39;&lt;pre&gt;&lt;code class=&quot;foo&quot;&gt;x = 1&lt;/code&gt;&lt;/pre&gt;&#39;, :html)).to eq(
spec/templates/helpers/html_helper_spec.rb:        &#39;&lt;pre class=&quot;code foo&quot;&gt;&lt;code class=&quot;foo&quot;&gt;x = 1&lt;/code&gt;&lt;/pre&gt;&#39;)
[bob:2.2.0/gems/yard-0.9.5] bob% grep &quot;&lt;code&quot; */*/*/*/*.*rb
spec/templates/helpers/markup/rdoc_markup_spec.rb:      expect(to_html(&#39;Hello +&lt;code&gt;+&#39;)).to eq &#39;&lt;p&gt;Hello &lt;tt&gt;&amp;lt;code&amp;gt;&lt;/tt&gt;&lt;/p&gt;&#39;
spec/templates/helpers/markup/rdoc_markup_spec.rb:      expect(fix_typewriter(&quot;&lt;code&gt;Hello +hello+&lt;/code&gt;&quot;)).to eq &quot;&lt;code&gt;Hello +hello+&lt;/code&gt;&quot;

他のはspecばかり．
</code></pre>
</div></div>

      <div id="footer">
  Generated on Thu Aug  4 17:50:13 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.2.2).
</div>

    </div>
  </body>
</html>